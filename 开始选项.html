<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>NTRå‰§æœ¬ç”Ÿæˆå™¨ - ç»ˆæå®šåˆ¶ç‰ˆ</title>
    <link
      rel="stylesheet"
      href="https://fontsapi.zeoseven.com/292/main/result.css"
    />
  </head>

  <body>
    <style>
      /* === æ ¸å¿ƒé…è‰²ï¼šå¤åˆ»å¦»æ‚¦è®ºå›é£æ ¼ === */
      :root {
        --dark-red: #c92a2a;
        --blood-red: #e03131;
        --light-red: #ff6b6b;
        --dark-gray: #1a1a1a;
        --gray: #2a2a2a;
        --light-gray: #3a3a3a;
        --text-main: #e0e0e0;
        --text-dim: #999;
        --text-dimmer: #666;
        --gold: #ffd700;
        --silver: #c0c0c0;
        --border: rgba(220, 20, 60, 0.2);
        --hover-bg: rgba(220, 20, 60, 0.08);
      }

      [data-theme="light"] {
        --dark-red: #c92a2a;
        --blood-red: #e03131;
        --light-red: #ff6b6b;
        --dark-gray: #f5f5f5;
        --gray: #ececec;
        --light-gray: #e0e0e0;
        --text-main: #2a2a2a;
        --text-dim: #666;
        --text-dimmer: #999;
        --gold: #d97706;
        --silver: #6b7280;
        --border: rgba(220, 20, 60, 0.15);
        --hover-bg: rgba(220, 20, 60, 0.05);
      }

      * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

      body {
        font-family: "Noto Sans SC", -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
        color: var(--text-main);
        line-height: 1.6;
        background: var(--dark-gray);
      }

      .container {
        width: 100%;
        max-width: 820px;
        margin: 0 auto;
        background: var(--dark-gray);
        font-size: 14px;
        position: relative;
        min-height: 100vh;
        padding-bottom: 80px; /* ç•™å‡ºåº•éƒ¨æ ç©ºé—´ */
      }

      /* Header */
      .header {
        background: var(--blood-red);
        padding: 10px 16px;
        position: sticky;
        top: 0;
        z-index: 100;
        border-bottom: 1px solid var(--border);
        box-shadow: 0 2px 10px rgba(0,0,0,0.2);
      }

      .header-content {
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .header h1 { font-size: 1.1em; font-weight: 700; color: #fff; }
      
      .theme-toggle {
        background: rgba(255, 255, 255, 0.2);
        border: none; color: #fff; padding: 6px 12px;
        border-radius: 4px; cursor: pointer; transition: background 0.2s;
      }
      .theme-toggle:hover { background: rgba(255, 255, 255, 0.3); }

      /* Content & Pages */
      .content { padding: 16px; }
      .page { display: none; animation: fadeIn 0.4s ease-out; }
      .page.active { display: block; }
      @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

      .page-title { font-size: 1.2em; font-weight: bold; color: var(--blood-red); margin-bottom: 12px; text-align: center; }
      .page-desc { color: var(--text-dim); text-align: center; margin-bottom: 24px; font-size: 0.95em; }

      /* Grid Options */
      .options-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(110px, 1fr));
        gap: 10px;
        margin-bottom: 20px;
      }

      .option-card {
        background: var(--light-gray);
        border: 2px solid transparent;
        border-radius: 8px;
        padding: 12px 8px;
        text-align: center;
        cursor: pointer;
        transition: all 0.2s ease-out;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        min-height: 90px;
      }

      .option-card:hover { border-color: var(--blood-red); transform: translateY(-2px); box-shadow: 0 4px 12px var(--hover-bg); }
      .option-card.selected {
        background: linear-gradient(135deg, var(--blood-red), var(--dark-red));
        border-color: var(--gold);
        box-shadow: 0 0 15px rgba(220, 20, 60, 0.4);
      }

      .option-card .icon { font-size: 1.8em; margin-bottom: 6px; }
      .option-card .label { font-size: 0.85em; font-weight: 600; color: var(--text-main); line-height: 1.2; word-break: break-all; }
      .option-card.selected .label { color: #fff; }

      .custom-input {
        width: 100%; background: rgba(0,0,0,0.2);
        border: 1px solid var(--border); border-radius: 4px;
        padding: 6px; color: var(--text-main); font-size: 0.8em;
        margin-top: 6px; text-align: center;
      }
      .custom-input:focus { border-color: var(--gold); outline: none; }

      /* Sliders (Keep original logic, apply new style) */
      .slider-section { margin-bottom: 25px; background: var(--light-gray); padding: 15px; border-radius: 8px; border: 1px solid var(--border); }
      .slider-group-title { color: var(--gold); font-size: 0.95em; font-weight: bold; margin-bottom: 15px; border-bottom: 1px solid var(--gray); padding-bottom: 8px; }
      
      .slider-row { display: flex; align-items: center; margin-bottom: 12px; gap: 10px; }
      .slider-label { width: 60px; font-size: 0.85em; color: var(--text-main); text-align: right; }
      .slider-container { flex: 1; position: relative; display: flex; align-items: center; }
      
      input[type=range] { -webkit-appearance: none; width: 100%; background: transparent; }
      input[type=range]::-webkit-slider-thumb {
        -webkit-appearance: none; height: 16px; width: 16px; border-radius: 50%;
        background: var(--gold); cursor: pointer; margin-top: -6px;
        box-shadow: 0 0 5px rgba(0,0,0,0.5);
      }
      input[type=range]::-webkit-slider-runnable-track {
        width: 100%; height: 4px; cursor: pointer;
        background: var(--gray); border-radius: 2px;
      }
      input[type=range]:focus::-webkit-slider-runnable-track { background: var(--blood-red); }
      .slider-val { width: 40px; text-align: right; font-size: 0.85em; color: var(--gold); font-family: monospace; }

      /* Progress Bar */
      .progress-bar { width: 100%; height: 5px; background: var(--light-gray); border-radius: 3px; margin-bottom: 20px; overflow: hidden; }
      .progress-fill { height: 100%; background: linear-gradient(90deg, var(--blood-red), var(--light-red)); transition: width 0.3s; }

      /* Buttons */
      .nav-buttons { display: flex; gap: 15px; justify-content: center; padding: 20px 0; }
      .btn {
        padding: 10px 30px; border: none; border-radius: 50px;
        font-weight: 600; cursor: pointer; transition: all 0.2s; font-size: 0.9em;
      }
      .btn:active { transform: scale(0.95); }
      .btn-prev { background: var(--light-gray); color: var(--text-main); }
      .btn-prev:hover { background: var(--hover-bg); }
      .btn-next { background: linear-gradient(135deg, var(--blood-red), var(--dark-red)); color: #fff; }
      .btn-next:hover { box-shadow: 0 0 15px rgba(220, 20, 60, 0.5); }
      .btn-submit { background: linear-gradient(135deg, var(--gold), #ff8c00); color: #000; }
      .btn-submit:hover { box-shadow: 0 0 20px rgba(255, 215, 0, 0.6); }
      .btn:disabled { opacity: 0.5; cursor: not-allowed; background: var(--gray); }

      /* Bottom Info */
      .bottom-info {
        background: var(--gray); border-top: 1px solid var(--border);
        padding: 10px 16px; position: fixed; bottom: 0; left: 0; right: 0; z-index: 90;
        font-size: 0.8em; box-shadow: 0 -4px 20px rgba(0,0,0,0.5);
      }
      .info-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 4px 10px; max-width: 820px; margin: 0 auto; }
      .info-item { display: flex; flex-direction: column; overflow: hidden; text-align: center; }
      .info-label { color: var(--text-dimmer); font-size: 0.85em; margin-bottom: 2px; }
      .info-value { color: var(--gold); font-weight: 600; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

      /* Modals */
      .modal-overlay {
        display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0;
        background: rgba(0,0,0,0.85); z-index: 1000; align-items: center; justify-content: center;
        animation: fadeIn 0.2s ease-out;
      }
      .modal-overlay.active { display: flex; }
      .modal-content {
        background: var(--dark-gray); border: 2px solid var(--blood-red);
        border-radius: 12px; padding: 25px; max-width: 380px; width: 90%; text-align: center;
        box-shadow: 0 8px 32px rgba(220, 20, 60, 0.2);
        animation: slideUp 0.3s ease-out;
      }
      @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
      
      .modal-title { font-size: 1.2em; font-weight: 700; color: var(--blood-red); margin-bottom: 15px; }
      .modal-message { color: var(--text-main); margin-bottom: 25px; font-size: 0.95em; line-height: 1.6; }
      .modal-btn { padding: 10px 25px; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; }
      .modal-btn-confirm { background: var(--blood-red); color: #fff; width: 100%; }

      /* Responsive */
      @media (max-width: 768px) {
        .info-grid { grid-template-columns: repeat(4, 1fr); }
        .options-grid { grid-template-columns: repeat(3, 1fr); }
      }
    </style>

    <div class="container">
      
      <div class="modal-overlay" id="confirmModal">
        <div class="modal-content">
          <div class="modal-title">ğŸ² æŒ‡ä»¤ç”Ÿæˆå®Œæ¯•</div>
          <div class="modal-message">
            åœºæ™¯æ•°æ®å·²å°è£…ã€‚<br>
            <span style="color:var(--text-dim); font-size:0.85em;">(åŒ…å«10é¡¹è®¾å®šä¸æ·±å±‚æ•°å€¼)</span>
          </div>
          <button class="modal-btn modal-btn-confirm" onclick="closeInfoModal()">å‘é€æŒ‡ä»¤</button>
        </div>
      </div>

      <div class="header">
        <div class="header-content">
          <h1>NTRå‰§æœ¬ç”Ÿæˆå™¨ Â· ç»ˆæç‰ˆ</h1>
          <button class="theme-toggle" onclick="toggleTheme()">
             <span id="theme-icon">ğŸŒ™</span>
          </button>
        </div>
      </div>

      <div class="content">
        <div class="progress-bar"><div class="progress-fill" id="progressBar"></div></div>

        <div class="page active" id="page0">
          <div class="page-title">1. æ–‡é£/èƒŒæ™¯ (Style)</div>
          <div class="page-desc">å†³å®šä¸–ç•Œè§‚ä¸å™äº‹åŸºè°ƒ</div>
          <div class="options-grid" id="grid_style"></div>
          <div class="nav-buttons"><button class="btn btn-next" id="nextBtn0" onclick="nextPage()" disabled>ä¸‹ä¸€æ­¥</button></div>
        </div>

        <div class="page" id="page1">
          <div class="page-title">2. {{ä¼˜}} çš„å¼€åœºçŠ¶æ€</div>
          <div class="page-desc">{{ä¼˜}} æ­£åœ¨åšä»€ä¹ˆ</div>
          <div class="options-grid" id="grid_youStatus"></div>
          <div class="nav-buttons"><button class="btn btn-prev" onclick="prevPage()">è¿”å›</button><button class="btn btn-next" id="nextBtn1" onclick="nextPage()" disabled>ä¸‹ä¸€æ­¥</button></div>
        </div>

        <div class="page" id="page2">
          <div class="page-title">3. {{ç§€}} çš„å¼€åœºçŠ¶æ€</div>
          <div class="page-desc">{{ç§€}} æ­£åœ¨åšä»€ä¹ˆ</div>
          <div class="options-grid" id="grid_xiuStatus"></div>
          <div class="nav-buttons"><button class="btn btn-prev" onclick="prevPage()">è¿”å›</button><button class="btn btn-next" id="nextBtn2" onclick="nextPage()" disabled>ä¸‹ä¸€æ­¥</button></div>
        </div>

        <div class="page" id="page3">
          <div class="page-title">4. {{NPC}} çš„å¼€åœºçŠ¶æ€</div>
          <div class="page-desc">{{NPC}} ç™»åœºåŠ¨ä½œ (åŒ…å«æœªå‡ºåœº)</div>
          <div class="options-grid" id="grid_npcStatus"></div>
          <div class="nav-buttons"><button class="btn btn-prev" onclick="prevPage()">è¿”å›</button><button class="btn btn-next" id="nextBtn3" onclick="nextPage()" disabled>ä¸‹ä¸€æ­¥</button></div>
        </div>

        <div class="page" id="page4">
          <div class="page-title">5. åˆå§‹åœºæ™¯</div>
          <div class="page-desc">æ•…äº‹å‘ç”Ÿçš„åœ°ç‚¹</div>
          <div class="options-grid" id="grid_location"></div>
          <div class="nav-buttons"><button class="btn btn-prev" onclick="prevPage()">è¿”å›</button><button class="btn btn-next" id="nextBtn4" onclick="nextPage()" disabled>ä¸‹ä¸€æ­¥</button></div>
        </div>

        <div class="page" id="page5">
          <div class="page-title">6. æå†™è§†è§’</div>
          <div class="page-desc">å†³å®šå™äº‹çš„ç¬¬ä¸€è§†è§’æˆ–é•œå¤´</div>
          <div class="options-grid" id="grid_pov"></div>
          <div class="nav-buttons"><button class="btn btn-prev" onclick="prevPage()">è¿”å›</button><button class="btn btn-next" id="nextBtn5" onclick="nextPage()" disabled>ä¸‹ä¸€æ­¥</button></div>
        </div>

        <div class="page" id="page6">
          <div class="page-title">7. åè®®/å…±è¯†/äº¤æ˜“</div>
          <div class="page-desc">åŸºäºåˆ©ç›Šäº¤æ¢çš„å‰§æƒ…å±•å¼€ (å«æ— )</div>
          <div class="options-grid" id="grid_trade"></div>
          <div class="nav-buttons"><button class="btn btn-prev" onclick="prevPage()">è¿”å›</button><button class="btn btn-next" id="nextBtn6" onclick="nextPage()">ä¸‹ä¸€æ­¥</button></div>
        </div>

        <div class="page" id="page7">
          <div class="page-title">8. å¥‘çº¦/å¼ºåˆ¶æŒ‡ä»¤</div>
          <div class="page-desc">åŸºäºä¸»ä»/èƒè¿«çš„å‰§æƒ…å±•å¼€ (å«æ— )</div>
          <div class="options-grid" id="grid_command"></div>
          <div class="nav-buttons"><button class="btn btn-prev" onclick="prevPage()">è¿”å›</button><button class="btn btn-next" id="nextBtn7" onclick="nextPage()">ä¸‹ä¸€æ­¥</button></div>
        </div>

        <div class="page" id="page8">
          <div class="page-title">9. å‚¬çœ /ç²¾ç¥æ§åˆ¶</div>
          <div class="page-desc">åŸºäºè®¤çŸ¥ä¿®æ”¹çš„å‰§æƒ…å±•å¼€ (å«æ— )</div>
          <div class="options-grid" id="grid_hypno"></div>
          <div class="nav-buttons"><button class="btn btn-prev" onclick="prevPage()">è¿”å›</button><button class="btn btn-next" id="nextBtn8" onclick="nextPage()">ä¸‹ä¸€æ­¥</button></div>
        </div>

        <div class="page" id="page9">
          <div class="page-title">10. {{ä¼˜}} çš„è¡£ç€</div>
          <div class="page-desc">è§†è§‰å¤–è§‚è®¾å®š</div>
          <div class="options-grid" id="grid_clothing"></div>
          <div class="nav-buttons"><button class="btn btn-prev" onclick="prevPage()">è¿”å›</button><button class="btn btn-next" id="nextBtn9" onclick="nextPage()">è¿›å…¥æ•°å€¼è°ƒå¾‹</button></div>
        </div>

        <div class="page" id="page10">
          <div class="page-title">âš™ï¸ æ•°å€¼è°ƒå¾‹</div>
          <div class="page-desc">æ·±å±‚å±æ€§è°ƒæ•´ (0-100%)</div>
          
          <div class="slider-section">
            <div class="slider-group-title">1. {{ä¼˜}}Â·è‚‰ä½“å¼€å‘åº¦</div>
            <div id="sliders-dev"></div>
          </div>

          <div class="slider-section">
            <div class="slider-group-title">2. {{ä¼˜}}Â·æ¬²æœ›æŒ‡å‘</div>
            <div id="sliders-lust"></div>
          </div>

          <div class="slider-section">
            <div class="slider-group-title">3. çŠ¶æ€é˜ˆå€¼</div>
            <div class="slider-row">
              <span class="slider-label">å •è½å€¼</span>
              <div class="slider-container"><input type="range" id="slider_corruption" min="0" max="100" value="0" oninput="updateVal(this)"></div>
              <span class="slider-val" id="val_slider_corruption">0%</span>
            </div>
             <div class="slider-row">
              <span class="slider-label">ç»¿å¸½å€¼</span>
              <div class="slider-container"><input type="range" id="slider_cuckold" min="0" max="100" value="0" oninput="updateVal(this)"></div>
              <span class="slider-val" id="val_slider_cuckold">0%</span>
            </div>
            <div class="slider-row">
              <span class="slider-label">æ·«å¦»æ¬²</span>
              <div class="slider-container"><input type="range" id="slider_share" min="0" max="100" value="0" oninput="updateVal(this)"></div>
              <span class="slider-val" id="val_slider_share">0%</span>
            </div>
          </div>

          <div class="nav-buttons">
             <button class="btn btn-prev" onclick="prevPage()">è¿”å›</button>
             <button class="btn btn-submit" onclick="submitSelection()">å¯åŠ¨ç”Ÿæˆ</button>
             <button class="btn btn-next" onclick="randomSelection()" style="background:var(--gray);">éšæœº</button>
          </div>
        </div>

      </div>

      <div class="bottom-info">
        <div class="info-grid">
          <div class="info-item"><span class="info-label">1.æ–‡é£</span><span class="info-value" id="info_style">-</span></div>
          <div class="info-item"><span class="info-label">2.{{ä¼˜}}</span><span class="info-value" id="info_youStatus">-</span></div>
          <div class="info-item"><span class="info-label">3.{{ç§€}}</span><span class="info-value" id="info_xiuStatus">-</span></div>
          <div class="info-item"><span class="info-label">4.{{NPC}}</span><span class="info-value" id="info_npcStatus">-</span></div>
          <div class="info-item"><span class="info-label">5.åœ°ç‚¹</span><span class="info-value" id="info_location">-</span></div>
          <div class="info-item"><span class="info-label">6.è§†è§’</span><span class="info-value" id="info_pov">-</span></div>
          <div class="info-item"><span class="info-label">7.äº¤æ˜“</span><span class="info-value" id="info_trade">-</span></div>
          <div class="info-item"><span class="info-label">8.å¥‘çº¦</span><span class="info-value" id="info_command">-</span></div>
          <div class="info-item"><span class="info-label">9.å‚¬çœ </span><span class="info-value" id="info_hypno">-</span></div>
          <div class="info-item"><span class="info-label">10.è¡£ç€</span><span class="info-value" id="info_clothing">-</span></div>
        </div>
      </div>
    </div>

    <script>
      // === 14é€‰é¡¹æ‰©å®¹ + è‡ªå®šä¹‰é…ç½® ===
      const optionsData = {
        style: [
          {i:"ğŸ“–", l:"åŸè‘—æ–‡é£"}, {i:"ğŸ¬", l:"è½»æ¾è¯™è°"}, {i:"ğŸŒ‘", l:"ä¸¥è‚ƒæš—é»‘"}, {i:"ğŸŒ¸", l:"çº¯çˆ±/è½»å°è¯´"}, 
          {i:"âš”ï¸", l:"å²è¯—/æ­£å‰§"}, {i:"ğŸ”", l:"å®˜èƒ½/é«˜H"}, {i:"ğŸ‘»", l:"æ‚¬ç–‘/æƒŠæ‚š"}, {i:"ğŸ§ ", l:"å¿ƒç†/æ„è¯†æµ"}, 
          {i:"ğŸ“œ", l:"å¤ä»£/æ­¦ä¾ "}, {i:"ğŸ¤–", l:"ç§‘å¹»/èµ›åš"}, {i:"ğŸšï¸", l:"åºŸåœŸ/æœ«ä¸–"}, {i:"ğŸ§›", l:"å¸è¡€é¬¼/å“¥ç‰¹"},
          {i:"ğŸ‘¾", l:"å…‹è‹é²/å¼‚ç§"}, {i:"ğŸ«", l:"é’æ˜¥/æ ¡å›­"}
        ],
        youStatus: [
          {i:"ğŸŒŸ", l:"ä¸»è§’ç™»åœº"}, {i:"ğŸ›Œ", l:"ä¼‘æ¯/ç¡çœ ä¸­"}, {i:"ğŸš¿", l:"æ²æµ´/æ¸…æ´ä¸­"}, {i:"ğŸ·", l:"å¾®é†º/é†‰é…’"}, 
          {i:"ğŸ”®", l:"è¿œç¨‹é€šè®¯ä¸­"}, {i:"ğŸ’„", l:"æ¢³å¦†æ‰“æ‰®ä¸­"}, {i:"ğŸ§¹", l:"æ—¥å¸¸åŠ³ä½œä¸­"}, {i:"ğŸ§˜â€â™€ï¸", l:"é”»ç‚¼/ä¿®è¡Œä¸­"}, 
          {i:"ğŸ”—", l:"è¢«æ‹˜æŸä¸­"}, {i:"ğŸ˜¿", l:"å“­æ³£/æ‚²ä¼¤"}, {i:"ğŸ¤•", l:"å—ä¼¤/è™šå¼±"}, {i:"ğŸ", l:"è¿›é£Ÿ/ç”¨é¤ä¸­"},
          {i:"ğŸ“š", l:"é˜…è¯»/å­¦ä¹ ä¸­"}, {i:"âŒ", l:"æœªå‡ºåœº"}
        ],
        xiuStatus: [
          {i:"ğŸ’¼", l:"å…¬åŠ¡/åŠ³ä½œä¸­"}, {i:"ğŸ", l:"èµ¶è·¯/é€”ä¸­"}, {i:"ğŸ®", l:"å¨±ä¹/æ¶ˆé£ä¸­"}, {i:"ğŸ»", l:"åº”é…¬/å®´ä¼šä¸­"}, 
          {i:"ğŸ‹ï¸", l:"ä¿®ç‚¼/é”»ç‚¼ä¸­"}, {i:"ğŸ³", l:"çƒ¹é¥ª/å‡†å¤‡é£Ÿç‰©"}, {i:"ğŸ’¤", l:"ç†Ÿç¡/æ— æ„è¯†"}, {i:"ğŸš¿", l:"æ²æµ´/æ›´è¡£ä¸­"}, 
          {i:"ğŸ‘€", l:"æš—ä¸­è§‚å¯Ÿ"}, {i:"ğŸšª", l:"é—¨å¤–å·å¬"}, {i:"ğŸ©º", l:"æ¥å—æ²»ç–—ä¸­"}, {i:"ğŸ—ºï¸", l:"è¿·è·¯/å—å›°ä¸­"},
          {i:"ğŸ›ï¸", l:"å¤–å‡ºé‡‡è´­ä¸­"}, {i:"âŒ", l:"æœªå‡ºåœº"}
        ],
        npcStatus: [
          {i:"ğŸ””", l:"æ‹œè®¿/æ•²é—¨"}, {i:"ğŸª‘", l:"ç«¯åäºä¸Šä½"}, {i:"ğŸšª", l:"æ½œä¼äºæš—å¤„"}, {i:"ğŸ‘ï¸", l:"é€šè¿‡ç›‘è§†å™¨è§‚å¯Ÿ"}, 
          {i:"ğŸ“„", l:"åœ¨ä¼˜ä¸ç§€å¯¹ç™½ä¸­è¢«æåŠ"}, {i:"ğŸ›ï¸", l:"åœ¨æ¦»ä¸Šç­‰å¾…"}, {i:"ğŸ”®", l:"è¿œç¨‹å¨èƒä¸­"}, {i:"ğŸ", l:"å¼‚åœ°ï¼Œå•ç‹¬ç”¨ä»–çš„è§†è§’æè¿°ä»–çš„å½“å‰çŠ¶æ€"}, 
          {i:"ğŸ˜·", l:"é®æ©é¢å®¹"}, {i:"ğŸ©¹", l:"å‡†å¤‡åˆ‘å…·/é“å…·"}, {i:"ğŸ“¦", l:"ä¼ªè£…æˆé€è´§"}, {i:"ğŸ“¸", l:"æ‰‹æŒè®°å½•ä»ª"},
          {i:"ğŸ‘¥", l:"å¸¦äººå›´å µ"}, {i:"âŒ", l:"æœªå‡ºåœº"}
        ],
        location: [
          {i:"ğŸ ", l:"{{ä¼˜}}çš„å±…æ‰€"}, {i:"ğŸ›‹ï¸", l:"å…¬å…±å…å ‚"}, {i:"ğŸ›", l:"æµ´å®¤/å‡€èº«å¤„"}, {i:"ğŸ«", l:"å­¦ä¹ /ä¿®ç‚¼åœºæ‰€"}, 
          {i:"ğŸ¢", l:"å…¬åŠ¡/åŠå…¬åœºæ‰€"}, {i:"ğŸ¥", l:"åŒ»ç–—/æ²»æ„ˆæ‰€"}, {i:"ğŸš‡", l:"äº¤é€šå·¥å…·å†…"}, {i:"ğŸŒ³", l:"é‡å¤–/è‡ªç„¶ç¯å¢ƒ"}, 
          {i:"ğŸ©", l:"æ—…åº—/å®¢æ ˆ"}, {i:"ğŸ°", l:"åœ°ä¸‹å®¤/å¯†å®¤"}, {i:"ğŸ–ï¸", l:"æ°´è¾¹/åº¦å‡åœ°"}, {i:"â›ª", l:"ç¥­ç¥€/ç¥åœ£åœºæ‰€"},
          {i:"ğŸ•‹", l:"ç‹­å°ç©ºé—´/ç®±æŸœ"}, {i:"ğŸª", l:"èˆå°/è¡¨æ¼”åœº"}
        ],
        pov: [
          {i:"ğŸ‘©", l:"ç¬¬ä¸€äººç§°:{{ä¼˜}}"}, {i:"ğŸ‘¨", l:"ç¬¬ä¸€äººç§°:{{ç§€}}"}, {i:"ğŸ‘¤", l:"ç¬¬ä¸€äººç§°:{{NPC}}"}, {i:"ğŸ‘ï¸", l:"ç¬¬ä¸‰äººç§°"}, 
          {i:"ğŸ­", l:"ç¾¤åƒ(å¤šè§†è§’)"}, {i:"ğŸ®", l:"ç¬¬äºŒäººç§°:{{User}}"}, {i:"ğŸ“¹", l:"ç›‘æ§/é•œå¤´è§†è§’"}, {i:"ğŸ“–", l:"æ—ç™½(å®¢è§‚)"}, 
          {i:"ğŸ§¸", l:"ç‰©å“/ç¯å¢ƒè§†è§’"}, {i:"ğŸ§ ", l:"å¿ƒç†ç‹¬ç™½(æ„è¯†æµ)"}, {i:"ğŸ‘¥", l:"è·¯äºº/ç¾¤ä¼—è§†è§’"}, {i:"ğŸ‘»", l:"çµé­‚/å¹½çµè§†è§’"},
          {i:"ğŸ“œ", l:"æ—¥è®°/è®°å½•ä½“"}, {i:"ğŸœ", l:"å¾®è§‚è§†è§’"}
        ],
        // å¢åŠ "æ— "é€‰é¡¹ï¼Œæ‰©å®¹è‡³14
        trade: [
          {i:"ğŸš«", l:"æ— æœºåˆ¶/æ— äº¤æ˜“"}, {i:"ğŸ’¸", l:"è‚‰å¿æŠµå€º"}, {i:"ğŸ“ˆ", l:"åœ°ä½/æ™‹å‡äº¤æ¢"}, {i:"ğŸ›¡ï¸", l:"å¯»æ±‚åº‡æŠ¤/å®‰å…¨"}, 
          {i:"ğŸ’°", l:"é‡‘é’±/èµ„æºäº¤æ˜“"}, {i:"ğŸ¤", l:"ç§˜å¯†æŠŠæŸ„äº¤æ¢"}, {i:"ğŸ¤", l:"ä¼´ä¾£é»˜è®¸å…±äº«"}, {i:"ğŸ ", l:"ä½æ‰€/é¢†åœ°å€Ÿç”¨"}, 
          {i:"ğŸ’Š", l:"æ²»ç–—/ä¿®å¤èº«ä½“"}, {i:"ğŸ¯", l:"è¯•ç‚¼é€šå…³å¥–åŠ±"}, {i:"ğŸ™", l:"èµç½ª/è¯·æ±‚åŸè°…"}, {i:"ğŸ", l:"ä½œä¸ºç¤¼ç‰©/ç¥­å“"},
          {i:"ğŸ«", l:"å…¥åœºåˆ¸/é€šè¡Œè¯"}, {i:"ğŸ”‘", l:"æƒ…æŠ¥/çœŸç›¸äº¤æ¢"}
        ],
        command: [
          {i:"ğŸš«", l:"æ— æœºåˆ¶/æ— å¥‘çº¦"}, {i:"ğŸ“œ", l:"å¥´éš¶/ä¸»ä»†å¥‘çº¦"}, {i:"ğŸ•", l:"å® ç‰©/å®¶ç•œåŒ–"}, {i:"ğŸ™‡", l:"ç»å¯¹æœä»æŒ‡ä»¤"}, 
          {i:"ğŸ–ï¸", l:"èº«ä½“ä½¿ç”¨æƒè½¬è®©"}, {i:"ğŸ™ˆ", l:"äº”æ„Ÿå‰¥å¤º/æ‹˜æŸ"}, {i:"ğŸ«£", l:"ç¾è€»éœ²å‡ºå‘½ä»¤"}, {i:"ğŸ¤°", l:"ç¹æ®–/æ’­ç§å¥‘çº¦"}, 
          {i:"ğŸ¤", l:"ç¦è¨€/å£æ·æŒ‡ä»¤"}, {i:"â›“ï¸", l:"åˆ‘ç½š/æ‹·é—®åˆ¤å†³"}, {i:"ğŸª‘", l:"å™¨ç‰©/å®¶å…·åŒ–"}, {i:"ğŸš»", l:"å…¬ç”¨/å…±äº«åŒ–"},
          {i:"ğŸ’‰", l:"è¯ç‰©/ä½“è´¨æ”¹é€ "}, {i:"â³", l:"æ—¶é—´ç®¡ç†/æ’æ³„æ§åˆ¶"}
        ],
        hypno: [
          {i:"ğŸš«", l:"æ— æœºåˆ¶/æ— å‚¬çœ "}, {i:"ğŸ§ ", l:"å¸¸è¯†ç½®æ¢/ä¿®æ”¹"}, {i:"â³", l:"æ—¶é—´åœæ­¢/å†»ç»“"}, {i:"ğŸ‘»", l:"è®¤çŸ¥é˜»ç¢/é€æ˜"}, 
          {i:"ğŸ­", l:"äººæ ¼è¦†å†™/æ”¹é€ "}, {i:"ğŸ’“", l:"å¿«æ„Ÿ/æ„Ÿåº¦ç™¾å€"}, {i:"ğŸ˜³", l:"ç¾è€»å¿ƒæ¶ˆé™¤"}, {i:"ğŸ§µ", l:"æçº¿æœ¨å¶/æ— å¿ƒ"}, 
          {i:"ğŸï¸", l:"è®°å¿†æ“ä½œ/é—å¿˜"}, {i:"ğŸ””", l:"å…³é”®è¯/è§¦å‘è¯"}, {i:"ğŸ„", l:"å¹»è§‰/æ„Ÿå®˜é”™ä¹±"}, {i:"ğŸ’¤", l:"ç¡çœ /ææƒšçŠ¶æ€"},
          {i:"ğŸ‘¥", l:"è®¤çŸ¥æ··æ·†/è¯¯è®¤"}, {i:"ğŸ”„", l:"èº«ä»½/èº«ä½“äº’æ¢"}
        ],
        clothing: [
          {i:"ğŸ‘š", l:"ä¾¿æœ/ç§æœ"}, {i:"ğŸ‘™", l:"æš´éœ²/æ€§æ„Ÿ"}, {i:"ğŸ‘—", l:"åº„é‡/ç¤¼æœ"}, {i:"ğŸ‘”", l:"åˆ¶æœ/å·¥ä½œæœ"}, 
          {i:"ğŸ§¸", l:"çœŸç©º/èµ¤è£¸"}, {i:"ğŸˆ", l:"æ—¥å¸¸è£…æŸ"}, {i:"â›“ï¸", l:"ä½©æˆ´æ‹˜æŸå…·"}, {i:"ğŸ©¹", l:"ç ´æŸ/æˆ˜æŸ"}, 
          {i:"ğŸ§–â€â™€ï¸", l:"ä»…è£¹å·¾/æµ´è¢"}, {i:"ğŸ‘•", l:"ä¼´ä¾£çš„è¡£ç‰©"}, {i:"ğŸ’", l:"å­¦å¾’/å­¦ç”Ÿè£…"}, {i:"ğŸ­", l:"Cosplay/æ‰®æ¼”æœ"},
          {i:"ğŸ¥", l:"ç—…å·æœ/ç»·å¸¦"}, {i:"ğŸ‘°", l:"å©šçº±/å«è¡£"}
        ]
      };

      const sliderDefs = {
        dev: ["èƒ¸", "ä¹³å¤´", "è„š", "å£è…”", "é˜´è’‚", "é˜´é“", "å±çœ¼", "å­å®«", "å¿ƒç†"],
        lust: ["æ£’æ¬²", "å£æ¬²", "ä¹³æ¬²", "ç©´æ¬²", "å°»æ¬²"]
      };

      // çŠ¶æ€ç®¡ç†
      let currentPage = 0;
      const totalPages = 11;
      const selections = {};
      Object.keys(optionsData).forEach(k => selections[k] = "");

      // åˆå§‹åŒ–æ¸²æŸ“
      function initRender() {
        Object.keys(optionsData).forEach(key => {
          const container = document.getElementById("grid_" + key);
          if(!container) return;
          
          let html = "";
          optionsData[key].forEach(opt => {
            html += `
              <div class="option-card" onclick="selectOption('${key}', '${opt.l}', this)">
                <div class="icon">${opt.i}</div>
                <div class="label">${opt.l}</div>
              </div>
            `;
          });
          html += `
            <div class="option-card" onclick="selectCustom('${key}', this)">
              <div class="icon">âœï¸</div>
              <div class="label">è‡ªå®šä¹‰</div>
              <input type="text" class="custom-input" placeholder="..." onclick="event.stopPropagation()" data-category="${key}">
            </div>
          `;
          container.innerHTML = html;
        });

        renderSliderGroup("sliders-dev", sliderDefs.dev, "dev");
        renderSliderGroup("sliders-lust", sliderDefs.lust, "lust");
      }

      function renderSliderGroup(containerId, labels, prefix) {
        const c = document.getElementById(containerId);
        let html = "";
        labels.forEach((lbl, idx) => {
          const id = `slider_${prefix}_${idx}`;
          html += `
            <div class="slider-row">
              <span class="slider-label">${lbl}</span>
              <div class="slider-container">
                <input type="range" id="${id}" min="0" max="100" value="0" oninput="updateVal(this)">
              </div>
              <span class="slider-val" id="val_${id}">0%</span>
            </div>
          `;
        });
        c.innerHTML = html;
      }

      function updateVal(input) {
        const display = document.getElementById("val_" + input.id);
        display.innerText = input.value + "%";
        const intensity = input.value / 100; 
        input.style.filter = `sepia(${1-intensity}) hue-rotate(-50deg)`; 
      }

      function showPage(idx) {
        document.querySelectorAll(".page").forEach(p => p.classList.remove("active"));
        document.getElementById("page" + idx).classList.add("active");
        currentPage = idx;
        const progress = (currentPage / (totalPages - 1)) * 100;
        document.getElementById("progressBar").style.width = progress + "%";
        window.scrollTo(0, 0);
      }

      function nextPage() { if(currentPage < totalPages - 1) showPage(currentPage + 1); }
      function prevPage() { if(currentPage > 0) showPage(currentPage - 1); }

      function selectOption(key, val, el) {
        el.parentElement.querySelectorAll(".option-card").forEach(c => c.classList.remove("selected"));
        el.classList.add("selected");
        selections[key] = val;
        updateInfo();
        const btn = document.querySelector(`#page${currentPage} .btn-next`);
        if(btn) btn.disabled = false;
      }

      function selectCustom(key, el) {
        el.parentElement.querySelectorAll(".option-card").forEach(c => c.classList.remove("selected"));
        el.classList.add("selected");
        const input = el.querySelector("input");
        input.focus();
        const btn = document.querySelector(`#page${currentPage} .btn-next`);
        
        input.oninput = (e) => {
          selections[key] = e.target.value;
          updateInfo();
          if(btn) btn.disabled = !e.target.value;
        };
        input.onkeydown = (e) => { if(e.key==="Enter" && e.target.value) nextPage(); }
      }

      function updateInfo() {
        Object.keys(selections).forEach(k => {
          const el = document.getElementById("info_" + k);
          if(el) el.textContent = selections[k] || "-";
        });
      }

      function randomSelection() {
        Object.keys(optionsData).forEach(key => {
           const arr = optionsData[key];
           const rand = arr[Math.floor(Math.random() * arr.length)];
           selections[key] = rand.l;
           
           // UI Sync
           const container = document.getElementById("grid_" + key);
           if(container) {
             container.querySelectorAll(".option-card").forEach(c => c.classList.remove("selected"));
           }
        });
        updateInfo();
        showPage(10);
      }

      // === å‘é€é€»è¾‘å‡çº§ ===
      function submitSelection() {
        // å¼¹å‡ºç¡®è®¤æ¨¡æ€æ¡†
        showInfoModal(
          function() {
            // å›è°ƒï¼šç¡®è®¤å‘é€åæ‰§è¡Œ
            const s = selections;
            
            let devStr = "";
            sliderDefs.dev.forEach((lbl, i) => {
              const val = document.getElementById(`slider_dev_${i}`).value;
              if(val > 0) devStr += `${lbl}:${val}% `;
            });

            let lustStr = "";
            sliderDefs.lust.forEach((lbl, i) => {
              const val = document.getElementById(`slider_lust_${i}`).value;
              if(val > 0) lustStr += `${lbl}:${val}% `;
            });

            const corruption = document.getElementById("slider_corruption").value;
            const cuckold = document.getElementById("slider_cuckold").value;
            const share = document.getElementById("slider_share").value;

            // è¿‡æ»¤æ‰"æ— æœºåˆ¶"çš„é€‰é¡¹
            let mechanics = "";
            if(s.trade && !s.trade.includes("æ— æœºåˆ¶")) mechanics += `[äº¤æ˜“: ${s.trade}] `;
            if(s.command && !s.command.includes("æ— æœºåˆ¶")) mechanics += `[å¼ºåˆ¶: ${s.command}] `;
            if(s.hypno && !s.hypno.includes("æ— æœºåˆ¶")) mechanics += `[å‚¬çœ : ${s.hypno}] `;
            if(!mechanics) mechanics = "æ— ç‰¹æ®Šæœºåˆ¶";

            const message = `ã€å‰§æƒ…ç”ŸæˆæŒ‡ä»¤ã€‘
1. æ–‡é£ï¼š${s.style}
2. è§†è§’ï¼š${s.pov}
3. å½“å‰åè®®/å…±è¯†/äº¤æ˜“/å¥‘çº¦/æŒ‡ä»¤/å‚¬çœ ï¼šä¸ {{NPC}}è¾¾æˆçš„ ${mechanics}  
4. åœ°ç‚¹ï¼š${s.location}

ã€è§’è‰²çŠ¶æ€ã€‘
- {{ä¼˜}}ï¼š${s.youStatus} (ç©¿ç€: ${s.clothing})
- {{ç§€}}ï¼š${s.xiuStatus}
- {{NPC}}ï¼š${s.npcStatus}

ã€æ•°å€¼è®¾å®šã€‘
{{ä¼˜}}Â·å¼€å‘éƒ¨ä½ ${devStr || "æ— "}
{{ä¼˜}}Â·æ€§æ¬² ${lustStr || "æ— "}
{{ä¼˜}}Â·å •è½å€¼:${corruption}%    
       å •è½é˜¶æ®µ:[æ›¿æ¢]
[{{ç§€}}Â·ç»¿å¸½] ${cuckold}%   [{{ç§€}}Â·æ·«å¦»] ${share}%

ã€æ‰§è¡Œè¦æ±‚ã€‘
è¯·ä»¥ ${s.pov} è§†è§’å±•å¼€æå†™ã€‚
åœºæ™¯ä½äº ${s.location}ã€‚é‡ç‚¹æå†™ {{ä¼˜}} åœ¨å—åˆ°ã€${mechanics}ã€‘å½±å“ä¸‹ï¼Œä½“ç° ${corruption}% å •è½å€¼å¸¦æ¥çš„å¿ƒç†å˜åŒ–ï¼Œä»¥åŠ ${s.clothing} çš„è§†è§‰ç»†èŠ‚ã€‚`;

            const command = `/send ${message} | /trigger`;
            
            if(typeof triggerSlash === "function") {
              triggerSlash(command);
            } else {
              // å…¼å®¹æ™®é€šæµè§ˆå™¨å¤åˆ¶
              navigator.clipboard.writeText(message);
              alert("æŒ‡ä»¤å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ (æœªæ£€æµ‹åˆ°é…’é¦†ç¯å¢ƒ)");
            }
          }
        );
      }

      // æ˜¾ç¤ºæ¨¡æ€æ¡†
      function showInfoModal(callback) {
        const modal = document.getElementById("confirmModal");
        modal.classList.add("active");
        window.confirmCallback = callback;
      }

      function closeInfoModal() {
        const modal = document.getElementById("confirmModal");
        modal.classList.remove("active");
        if(window.confirmCallback) {
          window.confirmCallback();
          window.confirmCallback = null;
        }
      }

      function toggleTheme() {
        const body = document.body;
        const icon = document.getElementById("theme-icon");
        if (body.getAttribute("data-theme") === "light") {
          body.removeAttribute("data-theme");
          icon.textContent = "ğŸŒ™";
        } else {
          body.setAttribute("data-theme", "light");
          icon.textContent = "â˜€ï¸";
        }
      }

      // è‡ªå®šä¹‰è¾“å…¥æ¡†å›è½¦é€»è¾‘
      document.addEventListener('keydown', function(e) {
         if(e.target.classList.contains('custom-input') && e.key === 'Enter') {
            nextPage();
         }
      });

      initRender();
      updateInfo();
    </script>
  </body>

</html>
